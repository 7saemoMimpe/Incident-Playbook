.. _configuring-alarms:

##################
Configuring Alarms
##################

.. image:: ../_static/images/icons/alarm.png
  :width: 100px
  :align: left
  :alt: Alarm

Alarms generate Alerts when something of interest happens (or doesn't happen!).
Cyphon employs two kinds of Alarms: `Watchdogs` and `Monitors`. Watchdogs generate Alerts when data match a certain set of criteria. Monitors generate Alerts when data is not being saved at an expected rate.

You can configure Watchdogs and Monitors through the "Configuring Alerts" panel on Cyphon's main admin page.

.. image:: ../_static/images/admin/configuring-alerts-admin.png
    :alt: Configuring Alerts


.. _watchdogs-overview:

*********
Watchdogs
*********

.. image:: ../_static/images/icons/watchdog.png
  :width: 100px
  :align: left
  :alt: Watchdog

When a Distillery saves data, Watchdogs "sniff" the new data. Each Watchdog has its own set of rules to decide whether it should "bark" at the new data and generate an Alert. These rules are called `Triggers`.

A Trigger has a DataSieve, a rank, and an Alert level. (For a discussion of Sieves, refer to the instructions on :ref:`Data Processing<sieves-overview>`). The Watchdog tests the data against each of its Triggers, in rank order. As soon as one of the Triggers matches the data, the Watchdog generates an Alert at the level specified by that Trigger (High, Medium, Low, or Info). If none of the Triggers match the data, the Watchdog does nothing.

Sometimes a Watchdog will bark too much and generate more Alerts than you want. You can throttle Alerts by applying a Muzzle to the Watchdog. A Muzzle defines criteria by which an Alert should be considered a "duplicate." When an Alert is identified as a duplicate of a previous Alert, the new Alert is not saved; instead, the number of "incidents" associated with the previous Alert is incremented. (However, you can still locate the data which triggered the duplicate Alert. To do this, construct a :ref:`Context<contexts-overview>` that mirrors the criteria defined by the Muzzle.)

To determine whether an Alert is a duplicate, it is compared to previous Alerts generated within the Muzzle's time frame. An Alert is condidered a duplicate if all of the following are true:

    - the Alert was generated by the same Watchdog
    - the Alert has the same level (High, Medium, etc.)
    - the data was saved by the same Distillery
    - the data has matching fields with the same value

The Muzzle's "matching fields" attribute defines which fields of the data must have matching values.


.. _monitors-overview:

********
Monitors
********

.. image:: ../_static/images/icons/monitor.png
  :width: 100px
  :align: left
  :alt: Monitor

Monitors keep an eye on Distilleries to make sure that data is being saved at an expected rate. Each Monitor watches one or more Distilleries, and it generates an Alert if none of the Distilleries it's monitoring has saved any data within a specified time interval.

A Monitor can generate a new Alert at each subsequent time interval if data has still not been saved, but you can disable this behavior if it becomes annoying.


*********
Read More
*********

    * :ref:`generating-alerts`
